{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["var Vibrancy = require(\"bindings\")(\"Vibrancy\");\nimport { BrowserWindow } from \"electron\";\n\ninterface ViewOptions {\n  material?: string;\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  resizeMask?: number;\n  maskImagePath?: string;\n  viewId?: number;\n  effectState?: string;\n}\n\nfunction AddView(buffer, options: ViewOptions) {\n  var viewOptions = {\n    Material: options.material,\n    Position: { x: options.x, y: options.y },\n    Size: { width: options.width, height: options.height },\n    ResizeMask: options.resizeMask,\n    MaskImagePath: options.maskImagePath,\n    EffectState: options.effectState,\n  };\n\n  return Vibrancy.AddView(buffer, viewOptions);\n}\n\nfunction RemoveView(buffer, viewId: number) {\n  var viewOptions = { ViewId: viewId };\n  return Vibrancy.RemoveView(buffer, viewOptions);\n}\n\nfunction UpdateView(buffer, options: ViewOptions) {\n  var viewOptions = {\n    Material: options.material,\n    Position: { x: options.x, y: options.y },\n    Size: { width: options.width, height: options.height },\n    ViewId: options.viewId,\n    EffectState: options.effectState,\n  };\n  return Vibrancy.UpdateView(buffer, viewOptions);\n}\n\nfunction DisableVibrancy(buffer) {\n  Vibrancy.SetVibrancy(false, buffer);\n}\n\nconst electronVibrancy = {\n  setVibrancy: function (window: BrowserWindow, options: ViewOptions) {\n    if (window == null) {\n      return -1;\n    }\n\n    var width = window.getSize()[0];\n    var height = window.getSize()[1];\n\n    if (options.material === null || typeof options.material === \"undefined\") {\n      options.material = \"appearance-based\";\n    }\n\n    if (\n      options.effectState === null ||\n      typeof options.effectState === \"undefined\"\n    ) {\n      options.effectState = \"follow-window\";\n    }\n\n    var resizeMask = 2; //auto resize on both axis\n\n    var viewOptions: ViewOptions = {\n      material: options.material,\n      width,\n      height,\n      x: 0,\n      y: 0,\n      resizeMask,\n      maskImagePath: options.maskImagePath,\n      effectState: options.effectState,\n    };\n\n    return AddView(window.getNativeWindowHandle(), viewOptions);\n  },\n  addView: function (window: BrowserWindow, options: ViewOptions) {\n    return AddView(window.getNativeWindowHandle(), options);\n  },\n  updateView: function (window: BrowserWindow, options: ViewOptions) {\n    return UpdateView(window.getNativeWindowHandle(), options);\n  },\n  removeView: function (window: BrowserWindow, viewId: number) {\n    return RemoveView(window.getNativeWindowHandle(), viewId);\n  },\n  disableVibrancy: function (window: BrowserWindow) {\n    return DisableVibrancy(window.getNativeWindowHandle());\n  },\n};\n\nexport default electronVibrancy;\n"]}